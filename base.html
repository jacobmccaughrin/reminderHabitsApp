<!DOCTYPE html>
<html>
    <head>
        <title>Health Reminder App</title>
        <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
        <link href="https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap" rel="stylesheet">
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <link rel="icon" href="images/avocado.png" type="image/x-icon">


        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <div class="header">
          <center style="scale:0.8;">
            <section>
              <img src="images/Healthy food Healthy life.png">
            </section>
            <section>
              <h1 style="font-size: 250%;">Notify Nutrition</h1>
            </section>
          </center>
        </div>

        <!--Sidebar Navigation-->
        <div id="mySideNav" class="sidenav">
          <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
          <a onclick="welcome();" data-toggle="modal" data-target="#welcome">About Us</a>
          <a href="log_stuff.html">Fitness & Health Log</a>
          <a href="goal.html">Goal Settings</a>
          <a onclick="settings()" data-toggle="modal" data-target="#settings">Notification Settings</a>
        </div>
        <div style="display: flex;">
          <span style="font-size: 2.5vw; cursor: pointer; margin-left: 1vw;position: absolute; top: 0; left: 0;" onclick="openNav()">&#9776; Open</span><br>
          <div class="image-container" style="scale: 0.7; margin-top: -1vw;">
            <img src="images/carbs.jpg" alt="Veggie Facts">
            <p>Carbs are your body's energy currency!</p>
          </div>

          <div class="image-container" style="scale: 0.7; margin-top: -0.25vw;">
            <img src="images/veggies.png" alt="Veggie Facts">
            <p>Vegetables boost your energy!</p>
          </div>

          <div class="image-container" style="scale: 0.6; margin-top: -2vw;">
            <img src="images/protein.png" alt="Veggie Facts">
            <p>Proteins play diverse roles in the body!</p>
          </div>
        </div>
      
          <!--HTML About Us Popup-->
          <div id="welcome" class="modal fade" style="margin-left: 25px; width: 1500px;">
            <div class="modal-dialog center">
              <div class="modal-content">
                <div class="modal-header">
                  <button style = 'color:blue' onclick = 'close_welcome();' class="close" data-dismiss = 'modal'>&timesbar;</button>
                  <center>
                    <h2>Made By TeenTechSF Hackathon Team: Jacob, Sean, Cinty, and Kalani</h4>
                  </center>
                </div>
              </div>
            </div>
          </div>
          <!-- Settings Modal -->
          <div id="settings" class="modal fade">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <button style='color:rgb(0, 0, 0)' onclick='close_settings();' class="close" data-dismiss='modal'>&times;</button>
                        <div class="menu">
                          <center>
                            <h1 style="font-size: 50px;">Settings</h1>
                            <input id="notificationButton" type="radio" name="notifs">
                            <label id="notificationLabel" for="enable">Enable Notifications</label>
                            <input id="disableNotificationButton" type="radio" name="notifs">
                            <label id="disableNotificationLabel" for="disable">Disable Notifications</label>
                          </center>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
          var myInterval;
          var notificationsEnabled = false;
          function displayNotification(message) {
    // Check if the browser supports notifications
    if (!("Notification" in window)) {
        console.error("This browser does not support system notifications");
        return;
    }

    // Check if notification permission is granted
    if (Notification.permission === "granted") {
        // Create and display the notification
        var notification = new Notification("New Notification", {
            body: message,
            
        });
    } else if (Notification.permission !== "denied") {
        // Otherwise, request permission from the user
        Notification.requestPermission().then(function(permission) {
            if (permission === "granted") {
                // If permission is granted, display the notification
                displayNotification(message);
            }
        });
    }
}



// Open the window

// Function to enable notifications
function enableNotifications() {
    notificationsEnabled = true;
    displayNotification("Enabled Notification permissions!");
    localStorage.setItem('notification', notificationsEnabled);
    
    // Start periodic notifications
    // 5 seconds in milliseconds
}

// Function to disable notifications
function disableNotifications() {

    clearInterval(myInterval); // Clear the interval to stop fetching notifications
    notificationsEnabled = false;
    localStorage.setItem('notification', notificationsEnabled);
    displayNotification("Disabled Notification permissions!"); // Display a notification confirming that notifications are disabled

}

// Function to fetch notifications
function fetchNotifications() {
    // Here you can put your notification fetching logic
    // For demonstration, let's display a message every 5 seconds
    displayNotification("This is a notification message!");
}

        // Attach event listener to the "Enable Notifications" button
        document.getElementById('notificationButton').addEventListener('click', enableNotifications);

        // Attach event listener to the "Disable Notifications" button
        document.getElementById('disableNotificationButton').addEventListener('click', disableNotifications);

        // Function to open sidenav overlay
        function openNav(){
              document.getElementById("mySideNav").style.width = "250px";
            }
            function closeNav(){
              document.getElementById("mySideNav").style.width = "0px";
            }
            function welcome()
            {
              document.getElementById("welcome").play();
            }

            function close_welcome()
            {
              document.getElementById("close_welcome").play();
            }

            // sidenav overlay
            function openNav(){
              document.getElementById("mySideNav").style.width = "450px";
            }
            function closeNav(){
              document.getElementById("mySideNav").style.width = "0px";
            }

            function settings()
            {
              document.getElementById("settings").play();
            }

            function close_settings()
            {
              document.getElementById("close_settings").play();
            }
          </script>
    </body>
</html>